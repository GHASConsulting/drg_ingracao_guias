# =============================================================================
# CONFIGURAÇÕES DO SISTEMA DRG - GUIA DE INTERNAÇÃO
# =============================================================================

# =============================================================================
# FASTAPI APPLICATION
# =============================================================================
APP_NAME=DRG Guias API
VERSION=1.0.0

# =============================================================================
# FLAGS DE AMBIENTE
# =============================================================================
# DEVELOPMENT: True=desenvolvimento, False=produção
DEVELOPMENT=True

# TESTING: True=modo teste, False=modo normal
TESTING=False

# LOG_LEVEL: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# =============================================================================
# CONFIGURAÇÕES DE PRODUÇÃO
# =============================================================================
# HOST: 127.0.0.1=local, 0.0.0.0=acesso externo
HOST=0.0.0.0

# PORT: Porta da aplicação
PORT=8000

# =============================================================================
# CONFIGURAÇÕES DE BANCO DE DADOS
# =============================================================================

# Tipo de banco (oracle, postgresql, firebird, sqlite)
DATABASE_TYPE=sqlite

# Configurações Oracle (Produção)
# ORACLE_HOST=servidor_oracle
# ORACLE_PORT=1521
# ORACLE_SID=XE
# ORACLE_USERNAME=usuario_oracle
# ORACLE_PASSWORD=senha_oracle
# ORACLE_DIR=/opt/oracle/instantclient_21_17
# IMPORTANTE: Se a senha contiver caracteres especiais (@, #, etc), use URL encoding:
#   @ = %40, # = %23, $ = %24, % = %25, & = %26, / = %2F, : = %3A
#   Exemplo: senha@123 deve ser senha%40123

# URL de conexão PostgreSQL (Alternativa)
# DATABASE_TYPE=postgresql
# DATABASE_URL=postgresql://usuario:senha@servidor:5433/database

# URL de conexão Firebird (Alternativa)
# DATABASE_TYPE=firebird
# DATABASE_URL=firebird://usuario:senha@servidor:3050/caminho/database.fdb

# URL de conexão SQLite (Desenvolvimento)
DATABASE_URL=sqlite:///database/teste_drg.db

# =============================================================================
# CONFIGURAÇÕES PADRÃO DO HOSPITAL
# =============================================================================
# Valores padrão para campos obrigatórios do hospital na API DRG
HOSPITAL_CODIGO_CONTRATADO=5499
HOSPITAL_NOME=HOSPITAL I9MED
HOSPITAL_CNES=9632587
HOSPITAL_PORTE=2
HOSPITAL_COMPLEXIDADE=1
HOSPITAL_ESFERA_ADMINISTRATIVA=2
HOSPITAL_ENDERECO=Rua Dias Adorno, 152 - Santo Agostinho - Belo Horizonte/MG - CEP: 30190100

# =============================================================================
# INTEGRAÇÃO COM DRG BRASIL
# =============================================================================

# URLs da API DRG (Ambiente de Teste/Homologação)
AUTH_API_URL=https://api-autenticacao.iagsaude.com/login
DRG_API_URL=https://api-hospitalar.iagsaude.com/integracao/guias/save

# Credenciais DRG Brasil
DRG_USERNAME=seu_usuario_drg_aqui
DRG_PASSWORD=sua_senha_drg_aqui
DRG_API_KEY=seu_codigo_unico_drg_aqui

# =============================================================================
# CONFIGURAÇÕES DE LOGGING
# =============================================================================
LOG_LEVEL=INFO
LOG_FILE=logs/drg_guias.log

# =============================================================================
# CONFIGURAÇÕES DE SEGURANÇA
# =============================================================================
# Timeout para requisições HTTP (segundos)
HTTP_TIMEOUT=60

# Intervalo de renovação de token (horas)
TOKEN_REFRESH_INTERVAL=3.5

# =============================================================================
# CONFIGURAÇÕES DE MONITORAMENTO
# =============================================================================
# Intervalo de monitoramento da tabela (minutos)
# 0 = desabilitado, 1 = 1 minuto, 5 = 5 minutos, etc.
MONITOR_INTERVAL_MINUTES=5

# Habilitar monitoramento automático (True/False)
AUTO_MONITOR_ENABLED=True

# =============================================================================
# CONFIGURAÇÕES DE CONSULTA EXTERNA DE GUIAS
# =============================================================================
# Timeout para consultas externas (milissegundos)
# 30000 = 30 segundos, 60000 = 1 minuto, 300000 = 5 minutos
CONSULTA_EXTERNA_TIMEOUT_MS=30000

# Intervalo mínimo entre consultas da mesma guia (milissegundos)
# 60000 = 1 minuto, 30000 = 30 segundos, 120000 = 2 minutos
CONSULTA_EXTERNA_INTERVALO_MS=60000

# Máximo de tentativas para consulta externa
CONSULTA_EXTERNA_MAX_TENTATIVAS=3

# URL da API externa para consulta de guias
# Para desenvolvimento, usar servidor mock local
CONSULTA_EXTERNA_URL=http://localhost:8001/consultar-guia
# Para produção, usar URL real do DRG
# CONSULTA_EXTERNA_URL=https://api.drg.com.br/consultar-guia

# =============================================================================
# CONFIGURAÇÕES DE MONITORAMENTO DE CAMPOS
# =============================================================================
# Habilitar monitoramento de campos
MONITOR_CAMPOS_ENABLED=true

# Intervalo entre verificações de campos (minutos)
# 10 = 10 minutos, 5 = 5 minutos, 30 = 30 minutos
MONITOR_CAMPOS_INTERVALO_MINUTES=10

# Tempo limite para considerar guia atualizada (minutos)
# 30 = 30 minutos, 60 = 1 hora, 120 = 2 horas
MONITOR_CAMPOS_TIMEOUT_MINUTES=30

# =============================================================================
# CONFIGURAÇÕES DE RATE LIMITING
# =============================================================================
# Limite de requisições por minuto para monitoramento de campos
RATE_LIMIT_MONITOR_MINUTES=10

# Limite de requisições por minuto para consulta externa
RATE_LIMIT_CONSULTA_EXTERNA_MINUTES=30

# Limite de requisições por minuto para consulta múltipla
RATE_LIMIT_CONSULTA_MULTIPLA_MINUTES=10

# Limite padrão de requisições por minuto para outras rotas
RATE_LIMIT_DEFAULT_MINUTES=5

# =============================================================================
# INSTRUÇÕES DE USO
# =============================================================================
#
# 1. Copie este arquivo para .env:
#    cp env.example .env
#
# 2. Configure as variáveis necessárias:
#    - DATABASE_URL: URL de conexão com seu banco
#    - DRG_USERNAME: Usuário da API DRG
#    - DRG_PASSWORD: Senha da API DRG
#    - DRG_API_KEY: Chave única da API DRG
#    - SECRET_KEY: Chave secreta da aplicação
#
# 3. Para produção, configure:
#    - DEVELOPMENT=False
#    - LOG_LEVEL=WARNING
#    - DATABASE_TYPE=oracle (ou seu banco principal)
#    - URLs de produção da DRG
#    - SECRET_KEY com chave forte e única
#
# 4. Para executar a aplicação FastAPI:
#    
#    DESENVOLVIMENTO (DEVELOPMENT=True):
#    python main.py
#    ou
#    uvicorn main:app --reload
#
#    PRODUÇÃO (DEVELOPMENT=False):
#    uvicorn main:app --host 0.0.0.0 --port 8000 --workers 4
#
#    TESTE (TESTING=True):
#    uvicorn main:app --port 8001
#
# =============================================================================